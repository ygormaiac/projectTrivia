(this["webpackJsonptrivia-test"]=this["webpackJsonptrivia-test"]||[]).push([[0],{107:function(e,t,a){e.exports=a.p+"static/media/trivia.466d153e.png"},113:function(e,t,a){e.exports=a(213)},118:function(e,t,a){},130:function(e,t){},132:function(e,t){},165:function(e,t){},166:function(e,t){},172:function(e,t){},209:function(e,t,a){},210:function(e,t,a){},211:function(e,t,a){},213:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(44),i=a.n(s),c=(a(118),a(24)),o=a(64),l=a(25),u=a(26),d=a.n(u),m=a(46),h=a(6),p=a(7),f=a(9),b=a(8),v=a(4),g=a(10),y=function(e){function t(){return Object(h.a)(this,t),Object(f.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props,t=e.name,a=e.test,n=e.disabled,s=e.onClick,i=e.className;return r.a.createElement("button",{type:"button","data-testid":a,disabled:n,onClick:s,className:i},t)}}]),t}(r.a.Component),O=function(e){return{type:"SUCCESS_INITIAL_GAME",payload:e}};var k=a(107),j=a.n(k),E=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(f.a)(this,Object(b.a)(t).call(this,e))).state={name:"",email:"",disabled:!0},a.handleChange=a.handleChange.bind(Object(v.a)(a)),a.validadeLogin=a.validadeLogin.bind(Object(v.a)(a)),a.loginIn=a.loginIn.bind(Object(v.a)(a)),a.handleClick=a.handleClick.bind(Object(v.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"handleChange",value:function(e){var t=this,a=e.target,n=a.name,r=a.value;this.setState(Object(m.a)({},n,r),(function(){return t.validadeLogin()}))}},{key:"validadeLogin",value:function(){var e=this.state,t=e.email,a=e.name,n=!(/^[a-z0-9.]+@[a-z0-9]+\.[a-z]+(\.[a-z]+)?$/i.test(t)&&a.length>=1);this.setState({disabled:n})}},{key:"loginIn",value:function(e){var t,a;return d.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t=this.props.dispatchLogin,n.t0=d.a,n.next=4,d.a.awrap(fetch("https://opentdb.com/api_token.php?command=request"));case 4:return n.t1=n.sent.json(),n.next=7,n.t0.awrap.call(n.t0,n.t1);case 7:a=n.sent,t(this.state),localStorage.setItem("token",JSON.stringify(a.token)),this.handleClick(e);case 11:case"end":return n.stop()}}),null,this)}},{key:"handleClick",value:function(e){var t=this.props.history,a=this.state,n=a.email,r=a.name;t.push(e);var s={player:{name:r,assertions:0,score:0,gravatarEmail:n}};localStorage.setItem("state",JSON.stringify(s))}},{key:"render",value:function(){var e=this,t=this.state.disabled;return r.a.createElement("div",{className:"input-login"},r.a.createElement("img",{src:j.a,alt:"Trivia",className:"img-trivia"}),r.a.createElement("label",{htmlFor:"name"},r.a.createElement("input",{className:"input-form-data",placeholder:"Nome",id:"name",name:"name","data-testid":"input-player-name",onChange:this.handleChange})),r.a.createElement("label",{htmlFor:"email"},r.a.createElement("input",{className:"input-form-data",placeholder:"E-mail",id:"email",name:"email","data-testid":"input-gravatar-email",onChange:this.handleChange})),r.a.createElement(y,{className:"button-play",test:"btn-play",name:"Jogar",disabled:t,onClick:function(){return e.loginIn("/play")}}),r.a.createElement(y,{className:"button-settings",test:"btn-settings",name:"Configura\xe7\xf5es",onClick:function(){return e.handleClick("/settings")}}))}}]),t}(r.a.Component),S=Object(c.b)(null,(function(e){return{dispatchLogin:function(t){return e(function(e){return{type:"SET_PERSONAL_INFO",payload:e}}(t))}}}))(E),w=a(108),I=a.n(w),C=function(e){function t(){var e;return Object(h.a)(this,t),(e=Object(f.a)(this,Object(b.a)(t).call(this))).state={total:0},e.emailUser=e.emailUser.bind(Object(v.a)(e)),e}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){localStorage.state&&this.getScore()}},{key:"componentDidUpdate",value:function(e){var t=this.props.index;e.index!==t&&this.getScore()}},{key:"getScore",value:function(){var e=JSON.parse(localStorage.getItem("state")),t=e.player.score;this.setState({total:t})}},{key:"emailUser",value:function(){var e=this.props.emailPlayer;return I()(e).toString()}},{key:"render",value:function(){var e=this.props.namePlayer,t=this.state.total;return r.a.createElement("header",{"data-testid":"header-player-name",className:"header-play"},r.a.createElement("img",{className:"gravatar-img","data-testid":"header-profile-picture",alt:"imageUser",src:"https://www.gravatar.com/avatar/".concat(this.emailUser())}),r.a.createElement("span",{className:"name-player"},e),r.a.createElement("span",{"data-testid":"header-score",className:"total-score"},t))}}]),t}(r.a.Component),N=Object(c.b)((function(e){return{namePlayer:e.userReducer.name,emailPlayer:e.userReducer.email}}))(C),x=a(112),A=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(f.a)(this,Object(b.a)(t).call(this,e))).state={shuffleList:[]},a.shuffleAnswers=a.shuffleAnswers.bind(Object(v.a)(a)),a.handleClick=a.handleClick.bind(Object(v.a)(a)),a.setShuffleState=a.setShuffleState.bind(Object(v.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.setShuffleState()}},{key:"componentDidUpdate",value:function(e){this.props.question!==e.question&&(document.querySelectorAll(".btn-answer").forEach((function(e){e.disabled=!1,e.className="btn-answer"})),this.setShuffleState())}},{key:"setShuffleState",value:function(){this.setState({shuffleList:this.shuffleAnswers()})}},{key:"shuffleAnswers",value:function(){var e=this.props.question;if(e){for(var t={testId:"correct-answer",answer:e.correct_answer},a=e.incorrect_answers.map((function(e,t){return{testId:"wrong-answer-".concat(t),answer:e}})),n=[].concat(Object(x.a)(a),[t]),r=n.length-1;r>0;r-=1){var s=Math.floor(Math.random()*(r+1)),i=[n[s],n[r]];n[r]=i[0],n[s]=i[1]}return n}}},{key:"handleClick",value:function(e){var t=e.target,a=this.props,n=a.question,r=a.score,s=n.correct_answer;r(t,n.difficulty),document.querySelector(".btn-next").classList.remove("hidden"),document.querySelectorAll(".btn-answer").forEach((function(e){e.innerText===s?(e.classList.add("green"),e.disabled=!0):(e.classList.add("red"),e.disabled=!0)}))}},{key:"render",value:function(){var e=this,t=this.state.shuffleList,a=this.props.question;return a?r.a.createElement("div",{className:"question-total"},r.a.createElement("span",{"data-testid":"question-category",className:"category"},a.category),r.a.createElement("p",{"data-testid":"question-text",className:"question"},function(e){var t=document.createElement("textarea");return t.innerHTML=e,t.value}(a.question)),t.map((function(t,a){return r.a.createElement(y,{test:t.testId,key:a,name:t.answer,onClick:e.handleClick,className:"btn-answer"})}))):r.a.createElement("div",null)}}]),t}(n.Component),L=(a(209),function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(f.a)(this,Object(b.a)(t).call(this,e))).state={indexQuestion:0,countdown:30},a.countdown=a.countdown.bind(Object(v.a)(a)),a.timeOut=a.timeOut.bind(Object(v.a)(a)),a.scoreSum=a.scoreSum.bind(Object(v.a)(a)),a.sum=a.sum.bind(Object(v.a)(a)),a.handleClick=a.handleClick.bind(Object(v.a)(a)),a.addIndex=a.addIndex.bind(Object(v.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.resultAPI)(),this.countdown()}},{key:"componentDidUpdate",value:function(e,t){0===t.countdown&&(this.timeOut(),document.querySelector(".btn-next").classList.remove("hidden"))}},{key:"componentWillUnmount",value:function(){clearInterval(this.cronometerInterval)}},{key:"timeOut",value:function(){document.querySelectorAll(".btn-answer").forEach((function(e){e.disabled=!0})),this.setState({countdown:"Your time is over! :("}),clearInterval(this.cronometerInterval)}},{key:"countdown",value:function(){var e=this;this.setState({countdown:30}),this.cronometerInterval=setInterval((function(){e.setState((function(e){return{countdown:e.countdown-1}}))}),1e3)}},{key:"scoreSum",value:function(e,t){var a=this.state.indexQuestion,n=this.props.results[a].correct_answer,r=JSON.parse(localStorage.getItem("state"));if(clearInterval(this.cronometerInterval),e.innerText===n){var s=this.sum(t);r.player.score+=s,r.player.assertions+=1}localStorage.setItem("state",JSON.stringify(r))}},{key:"sum",value:function(e){var t=0;"hard"===e&&(t=3),"mediun"===e&&(t=2),"easy"===e&&(t=1);return 10+this.state.countdown*t}},{key:"handleClick",value:function(){var e=this.state.indexQuestion,t=this.props.history;document.querySelector(".btn-next").classList.add("hidden"),4===e&&t.push("/feedback"),clearInterval(this.cronometerInterval),this.countdown(),this.addIndex()}},{key:"addIndex",value:function(){this.setState((function(e){return{indexQuestion:e.indexQuestion+1}}))}},{key:"render",value:function(){var e=this.props,t=e.results,a=e.loading,n=this.state,s=n.indexQuestion,i=n.countdown;return!0===a?r.a.createElement("div",{className:"loading"}):r.a.createElement("div",{className:"card-game"},r.a.createElement(N,{index:s}),r.a.createElement(A,{question:t[s],score:this.scoreSum}),r.a.createElement("span",{className:"countdown"},i),r.a.createElement(y,{name:"Pr\xf3xima",test:"btn-next",onClick:this.handleClick,className:"btn-next hidden"}))}}]),t}(n.Component)),q=Object(c.b)((function(e){return{results:e.playerReducer.results,loading:e.playerReducer.loading}}),(function(e){return{resultAPI:function(){return e((function(e){var t,a;return d.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t=JSON.parse(localStorage.getItem("token")),e({type:"LOADING_API",payload:void 0}),n.prev=2,n.t0=d.a,n.next=6,d.a.awrap(fetch("https://opentdb.com/api.php?amount=5&token=".concat(t)));case 6:return n.t1=n.sent.json(),n.next=9,n.t0.awrap.call(n.t0,n.t1);case 9:return a=n.sent,n.abrupt("return",e(O(a.results)));case 13:return n.prev=13,n.t2=n.catch(2),n.abrupt("return",e({type:"ERROR_INITIAL_GAME",error:n.t2}));case 16:case"end":return n.stop()}}),null,null,[[2,13]])}))}}}))(L),_=function(e){function t(){var e;return Object(h.a)(this,t),(e=Object(f.a)(this,Object(b.a)(t).call(this))).state={message:"",rightAnswers:0,total:0},e.handleMessage=e.handleMessage.bind(Object(v.a)(e)),e.handleClick=e.handleClick.bind(Object(v.a)(e)),e}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.handleMessage()}},{key:"handleMessage",value:function(){var e=JSON.parse(localStorage.getItem("state")).player,t=e.assertions,a=e.score;t<3?this.setState({message:"Podia ser melhor..."}):this.setState({message:"Mandou bem!"}),this.setState({rightAnswers:t,total:a})}},{key:"handleClick",value:function(e){this.props.history.push(e)}},{key:"render",value:function(){var e=this,t=this.state,a=t.message,n=t.rightAnswers,s=t.total;return r.a.createElement("div",{className:"div-feedback"},r.a.createElement(N,null),r.a.createElement("h1",{"data-testid":"feedback-text",className:"feedback"},a),r.a.createElement("p",{className:"results"},"Voc\xea acertou ",r.a.createElement("span",{"data-testid":"feedback-total-question"},n)," pergunta(s)"),r.a.createElement("p",{className:"results"},"Pontua\xe7\xe3o total:",r.a.createElement("span",{"data-testid":"feedback-total-score"},s)),r.a.createElement("section",{className:"buttons"},r.a.createElement(y,{test:"btn-play-again",className:"button-feedback",name:"Jogar novamente",onClick:function(){return e.handleClick("/")}}),r.a.createElement(y,{test:"btn-ranking",className:"button-feedback",name:"Ver Ranking",onClick:function(){return e.handleClick("/ranking")}})))}}]),t}(r.a.Component),M=function(e){function t(){return Object(h.a)(this,t),Object(f.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("h2",{"data-testid":"settings-title"},"Configura\xe7\xf5es")}}]),t}(n.Component);a(210),a(211);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var R=a(23),P=a(110),D=a(111),J=a(31),T={email:"",name:""},U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_PERSONAL_INFO":return Object(J.a)({},e,{email:t.payload.email,name:t.payload.name});default:return e}},G={loading:!1,error:"",results:[]},Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOADING_API":return Object(J.a)({},e,{loading:!0});case"SUCCESS_INITIAL_GAME":return Object(J.a)({},e,{loading:!1,results:t.payload});case"ERROR_INITIAL_GAME":return Object(J.a)({},e,{loading:!1,error:"Deu ruim!"});default:return e}},z=Object(R.combineReducers)({userReducer:U,playerReducer:Q}),F=Object(R.createStore)(z,Object(P.composeWithDevTools)(Object(R.applyMiddleware)(D.a)));window.Cypress&&(window.store=F);var W=F;i.a.render(r.a.createElement(o.a,null,r.a.createElement(c.a,{store:W},r.a.createElement((function(){return r.a.createElement("div",null,r.a.createElement(l.c,null,r.a.createElement(l.a,{path:"/play",component:q}),r.a.createElement(l.a,{path:"/settings",component:M}),r.a.createElement(l.a,{path:"/feedback",component:_}),r.a.createElement(l.a,{path:"/",component:S})))}),null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[113,1,2]]]);
//# sourceMappingURL=main.98155fd3.chunk.js.map